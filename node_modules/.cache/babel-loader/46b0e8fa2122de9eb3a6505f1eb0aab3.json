{"ast":null,"code":"import _defineProperty from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import CardItem from'../components/CardItem';import{logo}from\"../assets/logo.svg\";import tachyons from'tachyons';import Popup from\"reactjs-popup\";var Collectionp=/*#__PURE__*/function(_React$Component){_inherits(Collectionp,_React$Component);var _super=_createSuper(Collectionp);function Collectionp(props){var _this;_classCallCheck(this,Collectionp);_this=_super.call(this,props);_this.updateDb=function(catname,id,name,price,url,desc,newname,newprice,newurl,newdesc){fetch('https://nameless-sands-32962.herokuapp.com/admin/name/update',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({catname:catname,id:id,name:name,price:price,url:url,desc:desc,newname:newname,newprice:newprice,newurl:newurl,newdesc:newdesc})}).then(function(response){var promise=response.json();promise.then(function(result){if(result.response){window.location.reload();}});}).catch(function(error){alert('There was an error!');});};_this.deleteProduct=function(catname,id){fetch('https://nameless-sands-32962.herokuapp.com/admin/delete',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({catname:catname,id:id})}).then(function(response){var promise=response.json();promise.then(function(result){if(result.response){window.location.reload();}});}).catch(function(error){alert('There was an error!');});};_this.onPriceChange=function(e){_this.setState({price:e.target.value});};_this.onDescriptionChange=function(e){_this.setState({description:e.target.value});};_this.onNameChange=function(e){_this.setState({name:e.target.value});};_this.onUrlChange=function(e){_this.setState({url:e.target.value});};_this.addProduct=function(catname,name,url,price,description){fetch('https://nameless-sands-32962.herokuapp.com/admin/name/add',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({catname:catname,name:name,url:url,price:price,description:description})}).then(function(response){var promise=response.json();promise.then(function(result){if(result.response){window.location.reload();}});}).catch(function(error){alert('There was an error!');});};_this.state={data:[],name:'',url:'',price:'',description:''};return _this;}_createClass(Collectionp,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var catname=this.props.catname;fetch(\"https://nameless-sands-32962.herokuapp.com/produits/\".concat(catname)).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var collection;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:collection=_context.sent;_this2.setState({data:collection});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){console.error('There was an error!');});}},{key:\"render\",value:function render(){var _this3=this;var data=this.state.data;var catname=this.props.catname;return/*#__PURE__*/React.createElement(\"div\",{className:\"prodscoll\"},/*#__PURE__*/React.createElement(\"div\",{className:\"rows\"},data.map(function(_ref2){var id=_ref2.id,name=_ref2.name,price=_ref2.price,imageurl=_ref2.imageurl,description=_ref2.description;return/*#__PURE__*/React.createElement(\"div\",{className:\"tc h50 admincont\"},/*#__PURE__*/React.createElement(CardItem,{key:id,name:name,price:price,imageurl:imageurl,description:description}),/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(\"div\",{className:\"tc w-100\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button ttc mb4 ba br3 p-2 b--transparent grow \"},\" \\xE9diter \")),modal:true,closeOnDocumentClick:true},function(close){return/*#__PURE__*/React.createElement(\"div\",{className:\"p-5\"},/*#__PURE__*/React.createElement(\"h1\",{class:\"f1 lh-title ttc sans-serif p-4\"},\"\\xE9diter le produit\"),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Nom du produit \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer le nouveau nom\",onChange:_this3.onNameChange})),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Prix du produit \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer le nouveau prix\",onChange:_this3.onPriceChange})),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Image \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer l'addresse de la nouvelle image\",onChange:_this3.onUrlChange})),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Desription \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset mb4 ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer unde description du produit\",onChange:_this3.onDescriptionChange})),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){close();}},\"Annuler\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){_this3.updateDb(catname,id,name,price,imageurl,description,_this3.state.name,_this3.state.price,_this3.state.url,_this3.state.description);close();}},\"Confirmer\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){_this3.deleteProduct(catname,id);close();}},\"Supprimer le produit\"));}));}),/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(\"img\",{class:\"db ba b--black-10 h5 w6 dim pointer ml4 mt4\",alt:\"Ajouter une cat\\xE9gorie\",src:\"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2F9%2F9e%2FPlus_symbol.svg%2F500px-Plus_symbol.svg.png&f=1&nofb=1\"}),modal:true,closeOnDocumentClick:true},function(close){var _React$createElement;return/*#__PURE__*/React.createElement(\"div\",{className:\"tc\"},/*#__PURE__*/React.createElement(\"h1\",{class:\"f1 lh-title ttc sans-serif p-4\"},\"Ajouter un produit\"),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Nom du produit \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer le nom du produit\",onChange:_this3.onNameChange})),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Prix du produit \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer le prix du produit\",onChange:_this3.onPriceChange})),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Image \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer l'addresse d'une image du produit\",onChange:_this3.onUrlChange})),/*#__PURE__*/React.createElement(\"div\",{class:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",class:\"f4 b db mb2 serif\"},\"Desription \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",class:\"input-reset ba mb4 b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer une description du produit\",onChange:_this3.onDescriptionChange})),/*#__PURE__*/React.createElement(\"button\",(_React$createElement={\"p-2\":true,\"m-2\":true,ba:true,br3:true},_defineProperty(_React$createElement,\"p-2\",true),_defineProperty(_React$createElement,\"grow\",true),_defineProperty(_React$createElement,\"className\",\"button p-2 m-2 ba br3 p-2 grow\"),_defineProperty(_React$createElement,\"onClick\",function onClick(){close();}),_React$createElement),\"Annuler\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){var name=_this3.state.name;var url=_this3.state.url;var price=_this3.state.price;var description=_this3.state.description;if(name){_this3.addProduct(catname,name,url,price,description);close();}else{alert(\"Entrez un nom!\");}}},\"Confirmer\"));})));}}]);return Collectionp;}(React.Component);export default Collectionp;","map":{"version":3,"sources":["/home/molaiea/asosimtrans/src/Admin/Collectionp.js"],"names":["React","CardItem","tachyons","Popup","Collectionp","props","updateDb","catname","id","name","price","url","desc","newname","newprice","newurl","newdesc","fetch","method","headers","body","JSON","stringify","then","response","promise","json","result","window","location","reload","catch","error","alert","deleteProduct","onPriceChange","e","setState","target","value","onDescriptionChange","description","onNameChange","onUrlChange","addProduct","state","data","collection","console","map","imageurl","close","Component"],"mappings":"+9BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,C,qCAEA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,C,GAEMC,CAAAA,W,sHACL,qBAAYC,KAAZ,CAAkB,6CACjB,uBAAMA,KAAN,EADiB,MAyBlBC,QAzBkB,CAyBP,SAACC,OAAD,CAAUC,EAAV,CAAcC,IAAd,CAAoBC,KAApB,CAA2BC,GAA3B,CAAgCC,IAAhC,CAAsCC,OAAtC,CAA+CC,QAA/C,CAAyDC,MAAzD,CAAiEC,OAAjE,CAA2E,CAEpFC,KAAK,CAAC,8DAAD,CAAiE,CACtEC,MAAM,CAAE,MAD8D,CAEtEC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAF6D,CAGtEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACpBf,OAAO,CAAEA,OADW,CAEpBC,EAAE,CAAEA,EAFgB,CAGpBC,IAAI,CAAEA,IAHc,CAIpBC,KAAK,CAAEA,KAJa,CAKpBC,GAAG,CAAEA,GALe,CAMpBC,IAAI,CAAEA,IANc,CAOpBC,OAAO,CAAEA,OAPW,CAQpBC,QAAQ,CAAEA,QARU,CASpBC,MAAM,CAAEA,MATY,CAUpBC,OAAO,CAAEA,OAVW,CAAf,CAHgE,CAAjE,CAAL,CAgBMO,IAhBN,CAgBY,SAAAC,QAAQ,CAAI,CAEf,GAAMC,CAAAA,OAAO,CAAGD,QAAQ,CAACE,IAAT,EAAhB,CAEHD,OAAO,CAACF,IAAR,CAAa,SAAAI,MAAM,CAAE,CACpB,GAAGA,MAAM,CAACH,QAAV,CAAmB,CAClBI,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACA,CAED,CALD,EAOA,CA3BN,EA4BMC,KA5BN,CA4BY,SAAAC,KAAK,CAAI,CACZC,KAAK,CAAC,qBAAD,CAAL,CACH,CA9BN,EAgCD,CA3DiB,OA6DlBC,aA7DkB,CA6DF,SAAC3B,OAAD,CAAUC,EAAV,CAAe,CAE9BS,KAAK,CAAC,yDAAD,CAA4D,CAChEC,MAAM,CAAE,MADwD,CAEhEC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFuD,CAGhEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACpBf,OAAO,CAAEA,OADW,CAEpBC,EAAE,CAAEA,EAFgB,CAAf,CAH0D,CAA5D,CAAL,CAQOe,IARP,CAQa,SAAAC,QAAQ,CAAI,CAGf,GAAMC,CAAAA,OAAO,CAAGD,QAAQ,CAACE,IAAT,EAAhB,CAEHD,OAAO,CAACF,IAAR,CAAa,SAAAI,MAAM,CAAE,CACpB,GAAGA,MAAM,CAACH,QAAV,CAAmB,CAClBI,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACA,CAED,CALD,EAUA,CAvBP,EAwBOC,KAxBP,CAwBa,SAAAC,KAAK,CAAI,CACZC,KAAK,CAAC,qBAAD,CAAL,CACH,CA1BP,EA2BA,CA1FiB,OA4FlBE,aA5FkB,CA4FJ,SAACC,CAAD,CAAK,CAClB,MAAKC,QAAL,CAAc,CAAC3B,KAAK,CAAE0B,CAAC,CAACE,MAAF,CAASC,KAAjB,CAAd,EACA,CA9FiB,OAgGlBC,mBAhGkB,CAgGE,SAACJ,CAAD,CAAK,CACxB,MAAKC,QAAL,CAAc,CAACI,WAAW,CAAEL,CAAC,CAACE,MAAF,CAASC,KAAvB,CAAd,EACA,CAlGiB,OAoGlBG,YApGkB,CAoGL,SAACN,CAAD,CAAK,CACjB,MAAKC,QAAL,CAAc,CAAC5B,IAAI,CAAE2B,CAAC,CAACE,MAAF,CAASC,KAAhB,CAAd,EACA,CAtGiB,OAwGlBI,WAxGkB,CAwGN,SAACP,CAAD,CAAK,CAChB,MAAKC,QAAL,CAAc,CAAC1B,GAAG,CAAEyB,CAAC,CAACE,MAAF,CAASC,KAAf,CAAd,EACA,CA1GiB,OA4GlBK,UA5GkB,CA4GP,SAACrC,OAAD,CAAUE,IAAV,CAAgBE,GAAhB,CAAqBD,KAArB,CAA4B+B,WAA5B,CAA0C,CACpDxB,KAAK,CAAC,2DAAD,CAA8D,CAClEC,MAAM,CAAE,MAD0D,CAElEC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAFyD,CAGlEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACpBf,OAAO,CAAEA,OADW,CAEpBE,IAAI,CAAEA,IAFc,CAGpBE,GAAG,CAAEA,GAHe,CAIpBD,KAAK,CAAEA,KAJa,CAKpB+B,WAAW,CAAEA,WALO,CAAf,CAH4D,CAA9D,CAAL,CAWOlB,IAXP,CAWa,SAAAC,QAAQ,CAAI,CAEf,GAAMC,CAAAA,OAAO,CAAGD,QAAQ,CAACE,IAAT,EAAhB,CAEHD,OAAO,CAACF,IAAR,CAAa,SAAAI,MAAM,CAAE,CACpB,GAAGA,MAAM,CAACH,QAAV,CAAmB,CAClBI,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACA,CAED,CALD,EAOA,CAtBP,EAuBOC,KAvBP,CAuBa,SAAAC,KAAK,CAAI,CACZC,KAAK,CAAC,qBAAD,CAAL,CACH,CAzBP,EA0BA,CAvIiB,CAEjB,MAAKY,KAAL,CAAW,CACVC,IAAI,CAAE,EADI,CAEVrC,IAAI,CAAE,EAFI,CAGVE,GAAG,CAAE,EAHK,CAIVD,KAAK,CAAE,EAJG,CAKV+B,WAAW,CAAE,EALH,CAAX,CAFiB,aAUjB,C,qFAEmB,oBACVlC,CAAAA,OADU,CACC,KAAKF,KADN,CACVE,OADU,CAEjBU,KAAK,+DAAwDV,OAAxD,EAAL,CACKgB,IADL,0FACU,iBAAMC,QAAN,uJACuBA,CAAAA,QAAQ,CAACE,IAAT,EADvB,QACIqB,UADJ,eAGF,MAAI,CAACV,QAAL,CAAc,CAACS,IAAI,CAAEC,UAAP,CAAd,EAHE,sDADV,gEAMKhB,KANL,CAMW,SAAAC,KAAK,CAAI,CACZgB,OAAO,CAAChB,KAAR,CAAc,qBAAd,EACH,CARL,EASH,C,uCAkHQ,oBAGAc,CAAAA,IAHA,CAGQ,KAAKD,KAHb,CAGAC,IAHA,IAIAvC,CAAAA,OAJA,CAIW,KAAKF,KAJhB,CAIAE,OAJA,CAKP,mBACC,2BAAK,SAAS,CAAC,WAAf,eAEA,2BAAK,SAAS,CAAC,MAAf,EAGAuC,IAAI,CAACG,GAAL,CAAS,mBAAEzC,CAAAA,EAAF,OAAEA,EAAF,CAAMC,IAAN,OAAMA,IAAN,CAAYC,KAAZ,OAAYA,KAAZ,CAAmBwC,QAAnB,OAAmBA,QAAnB,CAA6BT,WAA7B,OAA6BA,WAA7B,oBACR,2BAAK,SAAS,CAAC,kBAAf,eACA,oBAAC,QAAD,EAAU,GAAG,CAAEjC,EAAf,CAAmB,IAAI,CAAEC,IAAzB,CAA+B,KAAK,CAAEC,KAAtC,CAA6C,QAAQ,CAAEwC,QAAvD,CAAiE,WAAW,CAAET,WAA9E,EADA,cAEA,oBAAC,KAAD,EACI,OAAO,cAAE,2BAAK,SAAS,CAAC,UAAf,eACR,8BAAQ,SAAS,CAAC,gDAAlB,gBADQ,CADb,CAII,KAAK,KAJT,CAKI,oBAAoB,KALxB,EAQG,SAAAU,KAAK,qBACJ,2BAAK,SAAS,CAAC,KAAf,eACA,0BAAI,KAAK,CAAC,gCAAV,yBADA,cAEA,2BAAK,KAAK,CAAC,EAAX,eACC,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,oBADD,cAEC,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,6CAAvB,CAAqE,IAAI,CAAC,MAA1E,CAAiF,mBAAiB,WAAlG,CACA,WAAW,CAAC,uBADZ,CAEA,QAAQ,CAAE,MAAI,CAACT,YAFf,EAFD,CAFA,cASD,2BAAK,KAAK,CAAC,EAAX,eACE,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,qBADF,cAEE,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,6CAAvB,CAAqE,IAAI,CAAC,MAA1E,CAAiF,mBAAiB,WAAlG,CACA,WAAW,CAAC,wBADZ,CAEA,QAAQ,CAAE,MAAI,CAACP,aAFf,EAFF,CATC,cAgBD,2BAAK,KAAK,CAAC,EAAX,eACE,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,WADF,cAEE,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,6CAAvB,CAAqE,IAAI,CAAC,MAA1E,CAAiF,mBAAiB,WAAlG,CACA,WAAW,CAAC,wCADZ,CAEA,QAAQ,CAAE,MAAI,CAACQ,WAFf,EAFF,CAhBC,cAuBD,2BAAK,KAAK,CAAC,EAAX,eACE,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,gBADF,cAEE,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,iDAAvB,CAAyE,IAAI,CAAC,MAA9E,CAAqF,mBAAiB,WAAtG,CACA,WAAW,CAAC,oCADZ,CAEA,QAAQ,CAAE,MAAI,CAACH,mBAFf,EAFF,CAvBC,cA8BD,8BACQ,SAAS,CAAC,gCADlB,CAEQ,OAAO,CAAE,kBAAM,CACbW,KAAK,GACN,CAJT,YA9BC,cAsCK,8BACE,SAAS,CAAC,gCADZ,CAEE,OAAO,CAAE,kBAAM,CACb,MAAI,CAAC7C,QAAL,CAAcC,OAAd,CAAuBC,EAAvB,CAA2BC,IAA3B,CAAiCC,KAAjC,CAAwCwC,QAAxC,CAAkDT,WAAlD,CAA+D,MAAI,CAACI,KAAL,CAAWpC,IAA1E,CAAgF,MAAI,CAACoC,KAAL,CAAWnC,KAA3F,CAAkG,MAAI,CAACmC,KAAL,CAAWlC,GAA7G,CAAkH,MAAI,CAACkC,KAAL,CAAWJ,WAA7H,EACAU,KAAK,GACN,CALH,cAtCL,cA+CK,8BACE,SAAS,CAAC,gCADZ,CAEE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACjB,aAAL,CAAmB3B,OAAnB,CAA4BC,EAA5B,EACA2C,KAAK,GACN,CALH,yBA/CL,CADI,EARR,CAFA,CADQ,EAAT,CAHA,cAkFC,oBAAC,KAAD,EACI,OAAO,cAAE,2BAAK,KAAK,CAAC,6CAAX,CACP,GAAG,CAAC,0BADG,CAEP,GAAG,CAAC,iLAFG,EADb,CAMI,KAAK,KANT,CAOI,oBAAoB,KAPxB,EAUG,SAAAA,KAAK,8CACJ,2BAAK,SAAS,CAAC,IAAf,eACA,0BAAI,KAAK,CAAC,gCAAV,uBADA,cAEA,2BAAK,KAAK,CAAC,EAAX,eACC,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,oBADD,cAEC,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,6CAAvB,CAAqE,IAAI,CAAC,MAA1E,CAAiF,mBAAiB,WAAlG,CACA,WAAW,CAAC,0BADZ,CAEA,QAAQ,CAAE,MAAI,CAACT,YAFf,EAFD,CAFA,cASD,2BAAK,KAAK,CAAC,EAAX,eACE,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,qBADF,cAEE,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,6CAAvB,CAAqE,IAAI,CAAC,MAA1E,CAAiF,mBAAiB,WAAlG,CACA,WAAW,CAAC,2BADZ,CAEA,QAAQ,CAAE,MAAI,CAACP,aAFf,EAFF,CATC,cAgBD,2BAAK,KAAK,CAAC,EAAX,eACE,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,WADF,cAEE,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,6CAAvB,CAAqE,IAAI,CAAC,MAA1E,CAAiF,mBAAiB,WAAlG,CACA,WAAW,CAAC,0CADZ,CAEA,QAAQ,CAAE,MAAI,CAACQ,WAFf,EAFF,CAhBC,cAuBD,2BAAK,KAAK,CAAC,EAAX,eACE,6BAAO,GAAG,CAAC,MAAX,CAAkB,KAAK,CAAC,mBAAxB,gBADF,cAEE,6BAAO,EAAE,CAAC,MAAV,CAAiB,KAAK,CAAC,iDAAvB,CAAyE,IAAI,CAAC,MAA9E,CAAqF,mBAAiB,WAAtG,CACA,WAAW,CAAC,mCADZ,CAEA,QAAQ,CAAE,MAAI,CAACH,mBAFf,EAFF,CAvBC,cA8BD,oDAAQ,UAAR,CAAY,UAAZ,CAAgB,EAAE,KAAlB,CAAmB,GAAG,KAAtB,sJACkB,gCADlB,iDAEiB,kBAAM,CACbW,KAAK,GACN,CAJT,kCA9BC,cAsCK,8BACE,SAAS,CAAC,gCADZ,CAEE,OAAO,CAAE,kBAAM,CACd,GAAM1C,CAAAA,IAAI,CAAG,MAAI,CAACoC,KAAL,CAAWpC,IAAxB,CACA,GAAME,CAAAA,GAAG,CAAG,MAAI,CAACkC,KAAL,CAAWlC,GAAvB,CACA,GAAMD,CAAAA,KAAK,CAAG,MAAI,CAACmC,KAAL,CAAWnC,KAAzB,CACA,GAAM+B,CAAAA,WAAW,CAAG,MAAI,CAACI,KAAL,CAAWJ,WAA/B,CACA,GAAGhC,IAAH,CAAQ,CACP,MAAI,CAACmC,UAAL,CAAgBrC,OAAhB,CAAyBE,IAAzB,CAA+BE,GAA/B,CAAoCD,KAApC,CAA2C+B,WAA3C,EACEU,KAAK,GACP,CAHD,IAII,CACHlB,KAAK,CAAC,gBAAD,CAAL,CACA,CAED,CAfH,cAtCL,CADI,EAVR,CAlFD,CAFA,CADD,CAkKA,C,yBAjTwBjC,KAAK,CAACoD,S,EAoThC,cAAehD,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport CardItem from '../components/CardItem';\nimport {logo} from '../assets/logo.svg';\nimport tachyons from 'tachyons';\nimport Popup from \"reactjs-popup\";\n\nclass Collectionp extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\tdata: [],\n\t\t\tname: '',\n\t\t\turl: '',\n\t\t\tprice: '',\n\t\t\tdescription: ''\n\t\t}\n\t\t\n\t}\n\n\tcomponentDidMount() {\n    const {catname} = this.props;\n    fetch(`https://nameless-sands-32962.herokuapp.com/produits/${catname}`)\n        .then(async response => {\n            const collection = await response.json();\n\n            this.setState({data: collection});\n        })\n        .catch(error => {\n            console.error('There was an error!');\n        });\n}\n\n\tupdateDb = (catname, id, name, price, url, desc, newname, newprice, newurl, newdesc)=>{\n\t\t\t\n\t\t\tfetch('https://nameless-sands-32962.herokuapp.com/admin/name/update', {\n\t\t\tmethod: 'post',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcatname: catname,\n\t\t\t\tid: id,\n\t\t\t\tname: name,\n\t\t\t\tprice: price,\n\t\t\t\turl: url,\n\t\t\t\tdesc: desc,\n\t\t\t\tnewname: newname,\n\t\t\t\tnewprice: newprice,\n\t\t\t\tnewurl: newurl,\n\t\t\t\tnewdesc: newdesc\n\t\t\t\t})\n\t\t})\n        .then( response => {\n            \n            const promise = response.json();\n\n        \tpromise.then(result=>{\n        \t\tif(result.response){\n        \t\t\twindow.location.reload();\n        \t\t}\n        \t\n        \t})\n\n        })\n        .catch(error => {\n            alert('There was an error!');\n        });\n\t\t\n\t}\n\n\tdeleteProduct = (catname, id)=>{\n\t\t\n\t\tfetch('https://nameless-sands-32962.herokuapp.com/admin/delete', {\n\t\t\tmethod: 'post',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcatname: catname,\n\t\t\t\tid: id\n\t\t\t\t})\n\t\t})\n        .then( response => {\n\n\n            const promise = response.json();\n\n        \tpromise.then(result=>{\n        \t\tif(result.response){\n        \t\t\twindow.location.reload();\n        \t\t}\n        \t\n        \t})\n\n            \n            \n\n        })\n        .catch(error => {\n            alert('There was an error!');\n        });\n\t}\n\n\tonPriceChange=(e)=>{\n\t\tthis.setState({price: e.target.value})\n\t}\t\n\n\tonDescriptionChange=(e)=>{\n\t\tthis.setState({description: e.target.value})\n\t}\n\n\tonNameChange=(e)=>{\n\t\tthis.setState({name: e.target.value})\n\t}\n\n\tonUrlChange=(e)=>{\n\t\tthis.setState({url: e.target.value})\n\t}\n\n\taddProduct=(catname, name, url, price, description)=>{\n\t\tfetch('https://nameless-sands-32962.herokuapp.com/admin/name/add', {\n\t\t\tmethod: 'post',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tcatname: catname,\n\t\t\t\tname: name,\n\t\t\t\turl: url,\n\t\t\t\tprice: price,\n\t\t\t\tdescription: description\n\t\t\t\t})\n\t\t})\n        .then( response => {\n  \n            const promise = response.json();\n\n        \tpromise.then(result=>{\n        \t\tif(result.response){\n        \t\t\twindow.location.reload();\n        \t\t}\n        \t\n        \t})\n\n        })\n        .catch(error => {\n            alert('There was an error!');\n        });\n\t}\n\n\trender(){\n\t\t\n\t\t\n\t\tconst {data} = this.state;\n\t\tconst {catname} = this.props;\n\t\treturn (\n\t\t\t<div className=\"prodscoll\">\n\t\t\t\n\t\t\t<div className='rows'>\n\t\t\t\t{\n\t\t\n\t\t\tdata.map(({id, name, price, imageurl, description})=>(\n\t\t\t\t<div className=\"tc h50 admincont\">\n\t\t\t\t<CardItem key={id} name={name} price={price} imageurl={imageurl} description={description} />\n\t\t\t\t<Popup\n\t\t\t\t    trigger={<div className=\"tc w-100\">\n\t\t\t\t    \t<button className=\"button ttc mb4 ba br3 p-2 b--transparent grow \"> éditer </button>\n\t\t\t\t    \t</div>}\n\t\t\t\t    modal\n\t\t\t\t    closeOnDocumentClick\n\t\t\t\t  >\n\t\t\t\t  {\n\t\t\t\t  \tclose=>(\n\t\t\t\t  \t\t<div className=\"p-5\">\n\t\t\t\t  \t\t<h1 class=\"f1 lh-title ttc sans-serif p-4\">éditer le produit</h1>\n\t\t\t\t    <div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Nom du produit </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer le nouveau nom\"\n\t\t\t\t\t    onChange={this.onNameChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Prix du produit </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer le nouveau prix\"\n\t\t\t\t\t    onChange={this.onPriceChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Image </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer l'addresse de la nouvelle image\"\n\t\t\t\t\t    onChange={this.onUrlChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Desription </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset mb4 ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer unde description du produit\"\n\t\t\t\t\t    onChange={this.onDescriptionChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Annuler\n\t\t          \t</button>\n\t\t          \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t              this.updateDb(catname, id, name, price, imageurl, description, this.state.name, this.state.price, this.state.url, this.state.description)\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Confirmer\n\t\t          \t</button>\n\t\t          \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t              this.deleteProduct(catname, id)\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Supprimer le produit\n\t\t          \t</button>\n\t\t          \t</div>\n\t\t\t\t  \t)\n\t\t\t\t  }\n\t\t\t\t  \t\n\t\t\t  \t</Popup>\n\t\t\t  \t</div>\n\n\t\t\t))\t\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t<Popup\n\t\t\t\t    trigger={<img class=\"db ba b--black-10 h5 w6 dim pointer ml4 mt4\"\n\t\t\t       alt=\"Ajouter une catégorie\"\n\t\t\t       src=\"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2F9%2F9e%2FPlus_symbol.svg%2F500px-Plus_symbol.svg.png&f=1&nofb=1\"\n\t\t\t  />\n}\n\t\t\t\t    modal\n\t\t\t\t    closeOnDocumentClick\n\t\t\t\t  >\n\t\t\t\t  {\n\t\t\t\t  \tclose=>(\n\t\t\t\t  \t\t<div className=\"tc\">\n\t\t\t\t  \t\t<h1 class=\"f1 lh-title ttc sans-serif p-4\">Ajouter un produit</h1>\n\t\t\t\t    <div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Nom du produit </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer le nom du produit\"\n\t\t\t\t\t    onChange={this.onNameChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Prix du produit </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer le prix du produit\"\n\t\t\t\t\t    onChange={this.onPriceChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Image </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer l'addresse d'une image du produit\"\n\t\t\t\t\t    onChange={this.onUrlChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div class=\"\">\n\t\t\t\t\t    <label for=\"name\" class=\"f4 b db mb2 serif\">Desription </label>\n\t\t\t\t\t    <input id=\"name\" class=\"input-reset ba mb4 b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer une description du produit\"\n\t\t\t\t\t    onChange={this.onDescriptionChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<button p-2 m-2 ba br3 p-2 grow\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Annuler\n\t\t          \t</button>\n\t\t          \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t            \tconst name = this.state.name;\n\t\t\t            \tconst url = this.state.url;\n\t\t\t            \tconst price = this.state.price;\n\t\t\t            \tconst description = this.state.description;\n\t\t\t            \tif(name){\n\t\t\t            \t\tthis.addProduct(catname, name, url, price, description);\n\t\t\t              \t\tclose();\n\t\t\t            \t}\n\t\t\t            \telse{\n\t\t\t            \t\talert(\"Entrez un nom!\")\n\t\t\t            \t}\n\t\t\t         \t  \n\t\t\t            }}\n\t\t         \t>\n\t\t            Confirmer\n\t\t          \t</button>\n\t\t          \t\n\t\t          \t</div>\n\t\t\t\t  \t)\n\t\t\t\t  }\n\t\t\t\t  \t\n\t\t\t  \t</Popup>\n\t\t\t\n\t\t\t</div>\n\t\t\t</div>);\n\t}\n}\n\nexport default Collectionp;"]},"metadata":{},"sourceType":"module"}