{"ast":null,"code":"import _regeneratorRuntime from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/molaiea/asosimtrans/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Item from'./Item';import{Link}from'react-router-dom';import tachyons from'tachyons';import Popup from\"reactjs-popup\";import Header from'./Header';import Footer from'./Footer';var Admin=/*#__PURE__*/function(_React$Component){_inherits(Admin,_React$Component);var _super=_createSuper(Admin);function Admin(props){var _this;_classCallCheck(this,Admin);_this=_super.call(this,props);_this.updateDb=function(id,name,newname,imageurl,oldurl){fetch('https://nameless-sands-32962.herokuapp.com/admin',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:id,name:name,newname:newname,url:oldurl,newurl:imageurl})}).then(function(response){var promise=response.json();promise.then(function(result){if(result.response){window.location.reload();}});}).catch(function(error){alert('There was an error!');});};_this.deleteDb=function(name){fetch('https://nameless-sands-32962.herokuapp.com/admin/del',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name})}).then(function(response){var promise=response.json();promise.then(function(result){if(result.response){window.location.reload();}});}).catch(function(error){alert('There was an error!');});};_this.onNameChange=function(e){_this.setState({name:e.target.value});};_this.onUrlChange=function(e){_this.setState({url:e.target.value});};_this.addCat=function(name,url){fetch('https://nameless-sands-32962.herokuapp.com/admin/add',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:name,url:url})}).then(function(response){var promise=response.json();promise.then(function(result){if(result.response){window.location.reload();}});}).catch(function(error){alert('There was an error!');});};_this.state={collections:[],name:'',url:''};return _this;}_createClass(Admin,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// GET request using fetch with error handling\nfetch('https://nameless-sands-32962.herokuapp.com/').then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:data=_context.sent;_this2.setState({collections:data});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){console.error('There was an error!',error);});}},{key:\"render\",value:function render(){var _this3=this;var collections=this.state.collections;var onRouteChange=this.props.onRouteChange;return/*#__PURE__*/React.createElement(\"div\",{className:\"admin\"},/*#__PURE__*/React.createElement(Header,{onRouteChange:onRouteChange}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"rows mt-5\"},collections.map(function(_ref2){var id=_ref2.id,name=_ref2.name,imageurl=_ref2.imageurl;return/*#__PURE__*/React.createElement(\"div\",{className:\"admincont\"},/*#__PURE__*/React.createElement(Link,{to:\"/admin/\"+name},/*#__PURE__*/React.createElement(Item,{id:id,name:name,imageurl:imageurl})),/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(\"div\",{className:\"tc w-100\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button ttc mb4 ba br3 p-2 b--transparent grow \"},\" \\xE9diter \")),modal:true,closeOnDocumentClick:true},function(close){return/*#__PURE__*/React.createElement(\"div\",{className:\"p-5 tc fill\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"f3 lh-title ttc sans-serif p-4\"},\"\\xE9diter la cat\\xE9gorie\"),/*#__PURE__*/React.createElement(\"div\",{className:\" w-100 tc\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",className:\"f4 b db mb2 serif\"},\"Nom de la cat\\xE9gorie \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",className:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer le nouveau nom\",onChange:_this3.onNameChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",className:\"f4 b db mb2 serif \"},\"Image \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",className:\"input-reset ba mb4 b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer l'addresse de la nouvelle image\",onChange:_this3.onUrlChange})),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2  ba br3 p-2  grow\",onClick:function onClick(){close();}},\"Annuler\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2  grow\",onClick:function onClick(){_this3.updateDb(id,name,_this3.state.name,_this3.state.url,imageurl);close();}},\"Confirmer\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){_this3.deleteDb(name);close();}},\"Supprimer la cat\\xE9gorie\"));}));}),/*#__PURE__*/React.createElement(Popup,{trigger:/*#__PURE__*/React.createElement(\"img\",{className:\"db ba b--black-10 h5 w6 dim pointer ml4\",alt:\"Ajouter une cat\\xE9gorie\",src:\"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2F9%2F9e%2FPlus_symbol.svg%2F500px-Plus_symbol.svg.png&f=1&nofb=1\"}),modal:true,closeOnDocumentClick:true},function(close){return/*#__PURE__*/React.createElement(\"div\",{className:\"p-5 tc\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"f1 lh-title ttc sans-serif p-4\"},\"ajouter une cat\\xE9gorie\"),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",className:\"f4 b db mb2 serif\"},\"Nom de la cat\\xE9gorie \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",className:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer le nom de la cat\\xE9gorie\",onChange:_this3.onNameChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",className:\"f4 b db mb2 serif\"},\"Image \"),/*#__PURE__*/React.createElement(\"input\",{id:\"name\",className:\"input-reset ba b--black-20 pa2 mb2 db mb4 w-100\",type:\"text\",\"aria-describedby\":\"name-desc\",placeholder:\"Entrer l'addresse de l'image de la cat\\xE9gorie\",onChange:_this3.onUrlChange})),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){close();}},\"Annuler\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button p-2 m-2 ba br3 p-2 grow\",onClick:function onClick(){var name=_this3.state.name;var url=_this3.state.url;if(name){_this3.addCat(name,url);close();}else{alert(\"Entrez un nom!\");}}},\"Confirmer\"));})),/*#__PURE__*/React.createElement(Footer,null));}}]);return Admin;}(React.Component);export default Admin;","map":{"version":3,"sources":["/home/molaiea/asosimtrans/src/Admin/Admin.js"],"names":["React","Item","Link","tachyons","Popup","Header","Footer","Admin","props","updateDb","id","name","newname","imageurl","oldurl","fetch","method","headers","body","JSON","stringify","url","newurl","then","response","promise","json","result","window","location","reload","catch","error","alert","deleteDb","onNameChange","e","setState","target","value","onUrlChange","addCat","state","collections","data","console","onRouteChange","map","close","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Item from './Item';\nimport {Link} from 'react-router-dom';\nimport tachyons from 'tachyons';\nimport Popup from \"reactjs-popup\";\nimport Header from './Header';\nimport Footer from './Footer';\n\nclass Admin extends React.Component{\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\tcollections: [],\n\t\t\tname: '',\n\t\t\turl: ''\t\t}\n\t}\n\n\tcomponentDidMount() {\n    // GET request using fetch with error handling\n    fetch('https://nameless-sands-32962.herokuapp.com/')\n        .then(async response => {\n            const data = await response.json();\n            this.setState({collections: data})\n        })\n        .catch(error => {\n            console.error('There was an error!', error);\n        });\n}\n\n\t\n\tupdateDb = (id, name, newname, imageurl, oldurl)=>{\n\t\t\tfetch('https://nameless-sands-32962.herokuapp.com/admin', {\n\t\t\tmethod: 'post',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tid: id,\n\t\t\t\tname: name,\n\t\t\t\tnewname: newname,\n\t\t\t\turl: oldurl,\n\t\t\t\tnewurl: imageurl\n\t\t\t\t})\n\t\t})\n        .then( response => {\n            \n            const promise = response.json();\n\n        \tpromise.then(result=>{\n        \t\tif(result.response){\n        \t\t\twindow.location.reload();\n        \t\t}\n        \t\n        \t})\n\n        })\n        .catch(error => {\n            alert('There was an error!');\n        });\n\t\t\n\t}\n\n\tdeleteDb = (name)=>{\n\t\tfetch('https://nameless-sands-32962.herokuapp.com/admin/del', {\n\t\t\tmethod: 'post',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name\n\t\t\t\t})\n\t\t})\n        .then( response => {\n\n            const promise = response.json();\n\n        \tpromise.then(result=>{\n        \t\tif(result.response){\n        \t\t\twindow.location.reload();\n        \t\t}\n        \t\n        \t})\n\n        })\n        .catch(error => {\n            alert('There was an error!');\n        });\n\t}\n\n\tonNameChange=(e)=>{\n\t\tthis.setState({name: e.target.value})\n\t}\n\n\tonUrlChange=(e)=>{\n\t\tthis.setState({url: e.target.value})\n\t}\n\n\taddCat=(name, url)=>{\n\t\tfetch('https://nameless-sands-32962.herokuapp.com/admin/add', {\n\t\t\tmethod: 'post',\n\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: name,\n\t\t\t\turl: url\n\t\t\t\t})\n\t\t})\n        .then( response => {\n\n            const promise = response.json();\n\n        \tpromise.then(result=>{\n        \t\tif(result.response){\n        \t\t\twindow.location.reload();\n        \t\t}\n        \t\n        \t})\n\n        })\n        .catch(error => {\n            alert('There was an error!');\n        });\n\t}\n\n\n\trender(){\n\t\tconst {collections} = this.state;\n\t\tconst {onRouteChange} = this.props\n\n\t\treturn(\n\t\t\t<div className=\"admin\">\n\t\t\t<Header onRouteChange={onRouteChange}/>\n\t\t\t<br/>\n\t\t\t<br/>\n\t\t\t\t<div className='rows mt-5'>\n\t\t\t\t{\n\t\t\n\t\t\tcollections.map(({id, name, imageurl})=>(\n\t\t\t\t<div className=\"admincont\">\n\t\t\t\t<Link to={\"/admin/\"+name}>\n\t\t\t\t<Item id={id} name={name} imageurl={imageurl} />\n\t\t\t\t</Link>\n\t\t\t\t<Popup\n\t\t\t\t    trigger={\n\t\t\t\t    \t<div className=\"tc w-100\">\n\t\t\t\t    \t<button className=\"button ttc mb4 ba br3 p-2 b--transparent grow \"> éditer </button>\n\t\t\t\t    \t</div>}\n\t\t\t\t    modal\n\t\t\t\t    closeOnDocumentClick\n\t\t\t\t  >\n\t\t\t\t  {\n\t\t\t\t  \tclose=>(\n\t\t\t\t  \t\t<div className=\"p-5 tc fill\">\n\t\t\t\t  \t\t<h1 className=\"f3 lh-title ttc sans-serif p-4\">éditer la catégorie</h1>\n\t\t\t\t    <div className=\" w-100 tc\">\n\t\t\t\t\t    <label for=\"name\" className=\"f4 b db mb2 serif\">Nom de la catégorie </label>\n\t\t\t\t\t    <input id=\"name\" className=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer le nouveau nom\"\n\t\t\t\t\t    onChange={this.onNameChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div className=\"\">\n\t\t\t\t\t    <label for=\"name\" className=\"f4 b db mb2 serif \">Image </label>\n\t\t\t\t\t    <input id=\"name\" className=\"input-reset ba mb4 b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer l'addresse de la nouvelle image\"\n\t\t\t\t\t    onChange={this.onUrlChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t\n\t\t\t\t  \t<button\n\t\t\t            className=\"button p-2 m-2  ba br3 p-2  grow\"\n\t\t\t            onClick={() => {\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Annuler\n\t\t          \t</button>\n\t\t          \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2  grow\"\n\t\t\t            onClick={() => {\n\t\t\t              this.updateDb(id, name, this.state.name, this.state.url, imageurl)\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Confirmer\n\t\t          \t</button>\n\t\t          \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t              this.deleteDb(name)\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Supprimer la catégorie\n\t\t          \t</button>\n\t\t          \t</div>\n\t\t\t\t  \t)\n\t\t\t\t  }\n\t\t\t\t  \t\n\t\t\t  \t</Popup>\n\t\t\t\t</div>\n\t\t\t))\t\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t<Popup\n\t\t\t\t    trigger={<img className=\"db ba b--black-10 h5 w6 dim pointer ml4\"\n\t\t\t       alt=\"Ajouter une catégorie\"\n\t\t\t       src=\"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2F9%2F9e%2FPlus_symbol.svg%2F500px-Plus_symbol.svg.png&f=1&nofb=1\"\n\t\t\t  />\n}\n\t\t\t\t    modal\n\t\t\t\t    closeOnDocumentClick\n\t\t\t\t  >\n\t\t\t\t  {\n\t\t\t\t  \tclose=>(\n\t\t\t\t  \t\t<div className=\"p-5 tc\">\n\t\t\t\t  \t\t<h1 className=\"f1 lh-title ttc sans-serif p-4\">ajouter une catégorie</h1>\n\t\t\t\t    <div className=\"\">\n\t\t\t\t\t    <label for=\"name\" className=\"f4 b db mb2 serif\">Nom de la catégorie </label>\n\t\t\t\t\t    <input id=\"name\" className=\"input-reset ba b--black-20 pa2 mb2 db w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer le nom de la catégorie\"\n\t\t\t\t\t    onChange={this.onNameChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<div className=\"\">\n\t\t\t\t\t    <label for=\"name\" className=\"f4 b db mb2 serif\">Image </label>\n\t\t\t\t\t    <input id=\"name\" className=\"input-reset ba b--black-20 pa2 mb2 db mb4 w-100\" type=\"text\" aria-describedby=\"name-desc\" \n\t\t\t\t\t    placeholder=\"Entrer l'addresse de l'image de la catégorie\"\n\t\t\t\t\t    onChange={this.onUrlChange}/>\n\t\t\t\t\t    \n\t\t\t\t  \t</div>\n\t\t\t\t  \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t              close();\n\t\t\t            }}\n\t\t         \t>\n\t\t            Annuler\n\t\t          \t</button>\n\t\t          \t<button\n\t\t\t            className=\"button p-2 m-2 ba br3 p-2 grow\"\n\t\t\t            onClick={() => {\n\t\t\t            \tconst name = this.state.name;\n\t\t\t            \tconst url = this.state.url;\n\t\t\t            \tif(name){\n\t\t\t            \t\tthis.addCat(name, url);\n\t\t\t              \t\tclose();\n\t\t\t            \t}\n\t\t\t            \telse{\n\t\t\t            \t\talert(\"Entrez un nom!\")\n\t\t\t            \t}\n\t\t\t         \t  \n\t\t\t            }}\n\t\t         \t>\n\t\t            Confirmer\n\t\t          \t</button>\n\t\t          \t\n\t\t          \t</div>\n\t\t\t\t  \t)\n\t\t\t\t  }\n\t\t\t\t  \t\n\t\t\t  \t</Popup>\n\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<Footer/>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Admin;"]},"metadata":{},"sourceType":"module"}